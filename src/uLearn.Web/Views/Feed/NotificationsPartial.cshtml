@using Database.Extensions
@using Database.Models
@using uLearn.Web.Views.Shared

@model uLearn.Web.Controllers.FeedNotificationsModel

@if (Model.Notifications.Count > 0)
{
	<div class="notifications__notifications-wrapper">
		@foreach (var notification in Model.Notifications)
		{
			<li class="notifications__notification @(notification.CreateTime >= Model.LastViewTimestamp ? "unread" : "")">
				@try
				{
					@Notifications.Notification((dynamic)notification, Model.CourseManager.FindCourse(notification.CourseId), Html, Url)
				}
				catch (Exception)
				{
					@* Sometimes slide or course can be deleted already. It's not the reason for throwing an error *@
				}
			</li>
		}
	</div>

	<div class="notifications__all-notifications-link">
		<a href="@Url.Action("Index", "Feed")">Показать все</a>
	</div>
}
else
{
	<li class="notifications__info">
		Здесь появятся уведомления из&nbsp;курсов, в&nbsp;которых вы обучаетесь@(User.HasAccess(CourseRole.Instructor) ? " и преподаёте" : "")
	</li>
}
